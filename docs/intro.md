# Introduction to Land Explorer

Land Explorer is a web app with 3 repositories.

A static monopage site
A React app
A typescript server

## Static Site

The static site was generated by something, we don't know what by and we don't want to know. The output was downloaded from its host and then edited directly to make it work.
We're hoping to leave it behind at some point in the future. For now the job is to make small changes as and when is needed. Any requests for big changes should be rejected in favour of starting from scratch.

### Things to know

* There is a function in a `<script></script>` at the bottom of index.html that adjusts the app link based on where the static site is being looked at from. So if you change the domain of the app, or the staging domain, or add another testing domain, for the link to work this needs to be adjusted.

## React App

The react app was generated by create-react-app, several years ago. We're in the process of rewriting it from class-based to functional components. It heavily relies on a react-mapboxgl library for the mapping features.

### Things to know

* There are Nav components and Map components, they communicate using redux.
* We get tilesets from Mapbox Studio that we reference in components/map/MapLayers
* Our base tileset uses ordnance survey data

## Hapi.js Back-end

We use a framework called Hapi.js in the back-end. We use typescript. 

We have 2 databases. 1 for LX users and LX generated data like markers, polygons etc. 1 for property boundaries from the Land Registry.

### Things to know

* We have started using Behaviour Driven Development, so we're writing tests for behaviour before writing code.

## Deployment

We deploy to a Hetzner server. The server is currently procured and configured manually. We use apache to direct requests to the hapi.js node server and to the front-end files.


## Things We Do Sometimes

On this project, we like our data in GeoJSON form. However, sometimes it isn't provided like that, and it's then we need to use some GIS tools to change it.

Currently we use ogr2ogr, which comes as a package of tools designed to manipulate geographical data. Installing these tools can be annoying, so I use QGIS to install it for me. This is a graphical GIS manipulation that installs ogr2ogr along with a lot of other stuff.

This is an example of the command you're working towards getting to run. We're running it in the directory with the files in that we want to transform.
`ogr2ogr -f GeoJSON -skipfailures scotland_and_wales.geojson scotland_and_wales_region.shp -t_srs "EPSG:4269"`

`scotland_and_wales.geojson` is the output file. `scotland_and_wales_region.sh`p is the input file and `"EPSG:4269"` is the projection that mapbox uses, also known as web-mercator.

